# í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

## 1. í”„ë¡œì íŠ¸ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” `r-test/` ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•˜ë©°, í”„ë¡œì íŠ¸ì˜ ì‹¤ì œ êµ¬ì¡°ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë©ë‹ˆë‹¤.

```
r-test/
â”œâ”€â”€ public/              # ì •ì  íŒŒì¼ (ì˜ˆ: ì´ë¯¸ì§€, ì•„ì´ì½˜)
â”‚   â”œâ”€â”€ vite.svg         # Vite ë¡œê³ 
â”œâ”€â”€ src/                 # ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ components/      # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ pages/           # í˜ì´ì§€ ë‹¨ìœ„ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ CompletePage/
â”‚   â”‚   â”‚   â”œâ”€â”€ CompletePage.jsx
â”‚   â”‚   â”œâ”€â”€ OrderPage/
â”‚   â”‚   â”‚   â”œâ”€â”€ Options.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Products.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Type.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ tests/         # OrderPage ê´€ë ¨ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Type.test.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ calculate.test.jsx
â”‚   â”‚   â”œâ”€â”€ SummaryPage/
â”‚   â”‚   â”‚   â”œâ”€â”€ SummaryPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ tests/         # SummaryPage ê´€ë ¨ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SummaryPage.test.jsx
â”‚   â”œâ”€â”€ hooks/           # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ contexts/        # ì „ì—­ ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ services/        # API ìš”ì²­ ë° ë°ì´í„° ê´€ë¦¬
â”‚   â”œâ”€â”€ utils/           # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â”œâ”€â”€ tests/       # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ê´€ë ¨ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ processPayment.test.js
â”‚   â”œâ”€â”€ mocks/           # API Mocking (MSW í•¸ë“¤ëŸ¬ í¬í•¨)
â”‚   â”‚   â”œâ”€â”€ handlers.js
â”‚   â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ styles/          # ìŠ¤íƒ€ì¼ ë° í…Œë§ˆ ì„¤ì •
â”‚   â”œâ”€â”€ test-utils.jsx   # í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”œâ”€â”€ setupTests.js    # í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ App.jsx          # ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ App.test.jsx     # App ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ main.jsx         # ì• í”Œë¦¬ì¼€ì´ì…˜ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”œâ”€â”€ package.json         # í”„ë¡œì íŠ¸ ì„¤ì • ë° ì˜ì¡´ì„±
â”œâ”€â”€ package-lock.json    # íŒ¨í‚¤ì§€ ë²„ì „ ì ê¸ˆ
â”œâ”€â”€ vite.config.js       # Vite ì„¤ì • íŒŒì¼
```

- **ìœ ë‹› í…ŒìŠ¤íŠ¸**: ê°œë³„ ì»´í¬ë„ŒíŠ¸, í•¨ìˆ˜ ë‹¨ìœ„ì˜ í…ŒìŠ¤íŠ¸ (`*.test.jsx`)
- **í†µí•© í…ŒìŠ¤íŠ¸**: ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ì¡°í•©ëœ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸
- **E2E í…ŒìŠ¤íŠ¸**: ì „ì²´ ì‚¬ìš©ì íë¦„ì„ ê²€ì¦
- **Fixtures**: Mock ë°ì´í„° ë° í…ŒìŠ¤íŠ¸ í—¬í¼ í•¨ìˆ˜ ê´€ë¦¬

## 2. í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‘ì„± ê·œì¹™

### ğŸ“Œ íŒŒì¼ ëª…ëª… ê·œì¹™

- í…ŒìŠ¤íŠ¸ ëŒ€ìƒ íŒŒì¼ëª…ì— `.test.jsx`ë¥¼ ë¶™ì—¬ ì‘ì„±
- ì˜ˆì‹œ: `App.test.jsx`, `calculate.test.jsx`

### ğŸ“Œ í…ŒìŠ¤íŠ¸ ì„¤ëª… (í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëª…)

```jsx
// âŒ ë‚˜ìœ ì˜ˆ
 test("checkbox and button", () => { ... });

// âœ… ì¢‹ì€ ì˜ˆ
 test("ì£¼ë¬¸ í™•ì¸ ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ì§€ ì•Šìœ¼ë©´ ê²°ì œ ë²„íŠ¼ì´ ë¹„í™œì„±í™” ìƒíƒœì—¬ì•¼ í•œë‹¤", () => { ... });
```

## 3. í…ŒìŠ¤íŠ¸ ì½”ë“œ íŒ¨í„´

### ğŸ“Œ ê¸°ë³¸ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```jsx
describe("í…ŒìŠ¤íŠ¸ ê·¸ë£¹ëª…", () => {
  test("í…ŒìŠ¤íŠ¸ ì„¤ëª…", () => {
    // í…ŒìŠ¤íŠ¸ ì½”ë“œ
    expect(true).toBe(true);
  });
});
```

### ğŸ“Œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í—¬í¼ í•¨ìˆ˜

```jsx
const findAndTypeInput = async (user, name, value) => {
  const input = await screen.findByRole("spinbutton", { name });
  await user.clear(input);
  await user.type(input, value);
  return input;
};

const findAndClickCheckbox = async (user, name) => {
  const checkbox = await screen.findByRole("checkbox", { name });
  await user.click(checkbox);
  return checkbox;
};
```

## 4. í…ŒìŠ¤íŠ¸ ì‘ì„± ì˜ˆì œ

### ğŸ“Œ ìƒí’ˆ ì£¼ë¬¸ ë° ê°€ê²© ê³„ì‚° í…ŒìŠ¤íŠ¸ (`App.test.jsx`, `calculate.test.jsx` ì°¸ê³ )

```jsx
test("ìƒí’ˆ ê°œìˆ˜ ë³€ê²½ ì‹œ ì´ ê°€ê²©ì´ ì˜¬ë°”ë¥´ê²Œ ê³„ì‚°ëœë‹¤", async () => {
  const user = userEvent.setup();
  render(<Type orderType="products" />);

  const total = screen.getByText("ì´ ìƒí’ˆ ê°€ê²©:", { exact: false });
  expect(total).toHaveTextContent("0ì›");

  await findAndTypeInput(user, "America", "2");
  expect(total).toHaveTextContent("2,000ì›");
});
```

### ğŸ“Œ ì˜µì…˜ ì„ íƒ UI ìƒíƒœ ë³€í™” í…ŒìŠ¤íŠ¸ (`Type.test.jsx` ì°¸ê³ )

```jsx
test("ì˜µì…˜ ì²´í¬ë°•ìŠ¤ ì„ íƒ ì‹œ ì´ ì˜µì…˜ ê°€ê²©ì´ ì—…ë°ì´íŠ¸ëœë‹¤", async () => {
  const user = userEvent.setup();
  render(<Type orderType="options" />);

  const optionsTotal = screen.getByText("ì´ ì˜µì…˜ ê°€ê²©:", { exact: false });
  expect(optionsTotal).toHaveTextContent("0ì›");

  await findAndClickCheckbox(user, "Insurance");
  expect(optionsTotal).toHaveTextContent("500ì›");
});
```

## 5. ê²€ì¦(Assertions) ê°€ì´ë“œ

| ìœ í˜•        | ì˜ˆì œ                                                              |
| --------- | --------------------------------------------------------------- |
| ìš”ì†Œ ì¡´ì¬ í™•ì¸  | `expect(screen.getByRole("button")).toBeInTheDocument();`       |
| í…ìŠ¤íŠ¸ í¬í•¨ í™•ì¸ | `expect(screen.getByText("ì´ ê¸ˆì•¡")).toHaveTextContent("5,000ì›");` |
| ìš”ì†Œ í™œì„±í™” ì—¬ë¶€ | `expect(screen.getByRole("button")).toBeEnabled();`             |
| ë¹„í™œì„±í™” í™•ì¸   | `expect(screen.getByRole("button")).toBeDisabled();`            |

## 6. í…ŒìŠ¤íŠ¸ ë°ì´í„° ë° Mocking

### ğŸ“Œ API Mocking (MSW í™œìš©)

```jsx
import { http, delay, HttpResponse } from "msw";

// ì„œë²„ì˜ travel.json ë°ì´í„°ë¥¼ ëª¨ì‚¬
const mockTravelData = {
    countries: [
        {
            name: "America",
            imagePath: "/images/america.jpeg",
        },
        {
            name: "England",
            imagePath: "/images/england.jpeg",
        },
    ],
    options: [
        {
            name: "Insurance",
        },
        {
            name: "Dinner",
        },
    ],
};

// ì£¼ë¬¸ ë‚´ì—­ì„ ì €ì¥í•  ë°°ì—´
let orderHistory = [];

// MSWì—ì„œ http://localhost:5003/products ìš”ì²­ì„ ê°€ë¡œì±„ê¸°
export const handlers = [
  // GET /products ìš”ì²­ í•¸ë“¤ë§
  http.get("http://localhost:5003/products", () => {
    return HttpResponse.json(mockTravelData.countries);
  }),

  // OPTIONS /products ìš”ì²­ í•¸ë“¤ë§ (CORS í™•ì¸ ìš”ì²­)
  http.options("http://localhost:5003/products", () => {
    return HttpResponse.text("", { status: 204 });
  }),

  // GET /options ìš”ì²­ í•¸ë“¤ë§
  http.get("http://localhost:5003/options", () => {
    return HttpResponse.json(mockTravelData.options);
  }),

  // POST /order ìš”ì²­ í•¸ë“¤ë§
  http.post("http://localhost:5003/order", async ({ request }) => {
    const body = await request.json();
    const orderNumber = Math.floor(Math.random() * 1000000);
    const order = { 
      price: body.totals.total, 
      orderNumber 
    };
    orderHistory.push(order);
    await delay(500); // ì‹¤ì œ ì„œë²„ ì‘ë‹µ ì§€ì—° ì‹œë®¬ë ˆì´ì…˜
    return HttpResponse.json({ orderNumber }, { status: 201 });
  }),

  // GET /order-history ìš”ì²­ í•¸ë“¤ë§
  http.get("http://localhost:5003/order-history", async () => {
    await delay(500); // ì‹¤ì œ ì„œë²„ ì‘ë‹µ ì§€ì—° ì‹œë®¬ë ˆì´ì…˜
      return HttpResponse.json(orderHistory, { status: 200 });
    }),

  // DELETE /order-history ìš”ì²­ í•¸ë“¤ë§
  http.delete("http://localhost:5003/order-history", () => {
    orderHistory = [];
    return HttpResponse.json(
      { message: "Order history cleared" }, 
      { status: 200 }
    );
  }),
];
```
---

### ğŸ“ **ê²°ë¡ **

ì´ ë¬¸ì„œëŠ” `@testing-library/react`ì™€ `jest`ë¥¼ ì‚¬ìš©í•œ React ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œì…ë‹ˆë‹¤. ìœ„ì˜ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ì—¬ ì¼ê´€ëœ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›Œì§€ê³ , ì½”ë“œ í’ˆì§ˆì´ í–¥ìƒë©ë‹ˆë‹¤!
